{"title":"day03-角色管理模块","uid":"79eff727357b876604bb9d3e662b11e2","slug":"springboot-vue-wx-project/day03-角色管理模块","date":"2022-07-11T03:30:31.000Z","updated":"2022-07-11T07:51:37.542Z","comments":true,"path":"api/articles/springboot-vue-wx-project/day03-角色管理模块.json","keywords":"Java study learn 学习","cover":null,"content":"<p>角色管理模块</p>\n<span id=\"more\"></span>\n\n\n\n<h1 id=\"查询\"><a href=\"#查询\" class=\"headerlink\" title=\"查询\"></a>查询</h1><h2 id=\"前端：\"><a href=\"#前端：\" class=\"headerlink\" title=\"前端：\"></a>前端：</h2><h3 id=\"role-vue\"><a href=\"#role-vue\" class=\"headerlink\" title=\"role.vue\"></a>role.vue</h3><h4 id=\"Template\"><a href=\"#Template\" class=\"headerlink\" title=\"Template\"></a>Template</h4><pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\"> v-model&#x3D;&quot;dataForm.roleName&quot;\n&lt;el-button size&#x3D;&quot;medium&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;searchHandle()&quot;&gt;查询&lt;&#x2F;el-button&gt;</code></pre>\n\n<h4 id=\"Script\"><a href=\"#Script\" class=\"headerlink\" title=\"Script\"></a>Script</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">searchHandle: function()&#123;\n\t\t\tlet that&#x3D;this;\n\t\t\tthat.$refs[&#39;dataForm&#39;].validate(valid&#x3D;&gt;&#123;\n\t\t\t\tif(valid)&#123;\n\t\t\t\t\tthat.$refs[&#39;dataForm&#39;].clearValidate();\n\t\t\t\t\tif(that.dataForm.roleName&#x3D;&#x3D;&#39;&#39;)&#123;\n\t\t\t\t\t\tthat.dataForm.roleName&#x3D;null;\n\t\t\t\t\t&#125;\n\t\t\t\t\tif(that.pageIndex!&#x3D;1)&#123;\n\t\t\t\t\t\tthat.pageIndex&#x3D;1;\n\t\t\t\t\t&#125;\n\t\t\t\t\tthat.loadDateList();\n\t\t\t\t&#125;else&#123;\n\t\t\t\t\treturn false;\n\t\t\t\t&#125;\n\t\t\t&#125;)\n\t\t&#125;,\n\t\tloadDateList: function()&#123;\n\t\t\tlet that&#x3D;this;\n\t\t\tthat.dataListLoading&#x3D;true;\n\t\t\tlet data&#x3D;&#123;\n\t\t\t\troleName: that.dataForm.roleName,\n\t\t\t\tpage: that.pageIndex,\n\t\t\t\tlength: that.pageSize\n\t\t\t&#125;;\n\t\t\tthat.$http(&#39;role&#x2F;searchRoleByPage&#39;,&#39;POST&#39;,data,true,function(resp)&#123;\n\t\t\t\tlet page&#x3D;resp.page;\n\t\t\t\tthat.dataList&#x3D;page.list;\n\t\t\t\tthat.totalCount&#x3D;page.totalCount;\n\t\t\t\tthat.dataListLoading&#x3D;false;\n\t\t\t&#125;)\n\t\t&#125;</code></pre>\n\n<h2 id=\"后端：\"><a href=\"#后端：\" class=\"headerlink\" title=\"后端：\"></a>后端：</h2><h3 id=\"DAO\"><a href=\"#DAO\" class=\"headerlink\" title=\"DAO\"></a>DAO</h3><h4 id=\"TbRoleDao\"><a href=\"#TbRoleDao\" class=\"headerlink\" title=\"TbRoleDao\"></a>TbRoleDao</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public ArrayList&lt;HashMap&gt; searchRoleByPage(HashMap param);\npublic long searchRoleCount(HashMap param);</code></pre>\n\n<h4 id=\"Mapper\"><a href=\"#Mapper\" class=\"headerlink\" title=\"Mapper\"></a>Mapper</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">&lt;select id&#x3D;&quot;searchRoleByPage&quot; resultType&#x3D;&quot;HashMap&quot;&gt;\n    SELECT r.id,r.role_name as roleName,COUNT(u.id) as users,\n           JSON_LENGTH(r.permissions) as permissions,\n           r.&#96;desc&#96;,r.systemic\n    FROM tb_role r\n    LEFT JOIN tb_user u ON JSON_CONTAINS(u.role,CONVERT(r.id,CHAR))\n    &lt;where&gt;\n        &lt;if test&#x3D;&quot;roleName!&#x3D;null&quot;&gt;\n            AND r.role_name LIKE &#39;%$&#123;roleName&#125;%&#39;\n        &lt;&#x2F;if&gt;\n    &lt;&#x2F;where&gt;\n    GROUP BY r.id\n    ORDER BY r.id\n    LIMIT #&#123;start&#125;,#&#123;length&#125;\n&lt;&#x2F;select&gt;\n&lt;select id&#x3D;&quot;searchRoleCount&quot; parameterType&#x3D;&quot;HashMap&quot; resultType&#x3D;&quot;Long&quot;&gt;\n    SELECT COUNT(*)\n    FROM (\n        SELECT r.id FROM tb_role r\n        LEFT JOIN tb_user u ON JSON_CONTAINS(u.role,CONVERT(r.id,CHAR))\n        &lt;where&gt;\n            &lt;if test&#x3D;&quot;roleName!&#x3D;null&quot;&gt;\n                AND r.role_name LIKE &#39;%$&#123;roleName&#125;%&#39;\n            &lt;&#x2F;if&gt;\n        &lt;&#x2F;where&gt;\n        GROUP BY r.id\n         )as temp\n&lt;&#x2F;select&gt;</code></pre>\n\n<h3 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h3><h4 id=\"RoleService\"><a href=\"#RoleService\" class=\"headerlink\" title=\"RoleService\"></a>RoleService</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public PageUtils searchRoleByPage(HashMap param);</code></pre>\n\n<h4 id=\"Impl\"><a href=\"#Impl\" class=\"headerlink\" title=\"Impl\"></a>Impl</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Override\npublic PageUtils searchRoleByPage(HashMap param) &#123;\n    long count &#x3D; roleDao.searchRoleCount(param);\n    ArrayList&lt;HashMap&gt; list &#x3D; roleDao.searchRoleByPage(param);\n    Integer start &#x3D; (Integer) param.get(&quot;start&quot;);\n    Integer length &#x3D; (Integer) param.get(&quot;length&quot;);\n    PageUtils pageUtils&#x3D;new PageUtils(list,count,start,length);\n    return pageUtils;\n&#125;</code></pre>\n\n<h3 id=\"Controller\"><a href=\"#Controller\" class=\"headerlink\" title=\"Controller\"></a>Controller</h3><h4 id=\"SearchRoleByPageForm\"><a href=\"#SearchRoleByPageForm\" class=\"headerlink\" title=\"SearchRoleByPageForm\"></a>SearchRoleByPageForm</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Data\n@Schema(description &#x3D; &quot;查询角色名称&quot;)\npublic class SearchRoleByPageForm &#123;\n\n    @Pattern(regexp &#x3D; &quot;^[0-9a-zA-Z\\\\u4e00-\\\\u9fa5]&#123;1,10&#125;$&quot;,message &#x3D; &quot;角色名称不正确&quot;)\n    @Schema(description &#x3D; &quot;角色名称&quot;)\n    private String roleName;\n\n    @NotNull(message &#x3D; &quot;page不能为空&quot;)\n    @Min(value &#x3D; 1,message &#x3D; &quot;页数不能小于1&quot;)\n    @Schema(description &#x3D; &quot;页数&quot;)\n    private Integer page;\n\n    @NotNull(message &#x3D; &quot;length不能为空&quot;)\n    @Range(min &#x3D; 10,max &#x3D; 50,message &#x3D; &quot;length必须在10-50之间&quot;)\n    @Schema(description &#x3D; &quot;每页记录数&quot;)\n    private Integer length;\n&#125;</code></pre>\n\n<h4 id=\"RoleController\"><a href=\"#RoleController\" class=\"headerlink\" title=\"RoleController\"></a>RoleController</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@PostMapping(&quot;&#x2F;searchRoleByPage&quot;)\n@Operation(summary &#x3D; &quot;查询角色分页数据&quot;)\n@SaCheckPermission(value &#x3D; &#123;&quot;ROOT&quot;,&quot;ROLE:SELECT&quot;&#125;,mode &#x3D; SaMode.OR)\npublic R searchRoleByPage(@Valid @RequestBody SearchRoleByPageForm form)&#123;\n    HashMap param &#x3D; JSONUtil.parse(form).toBean(HashMap.class);\n    int page &#x3D; form.getPage();\n    int length &#x3D; form.getLength();\n    int start&#x3D;(page-1)*length;\n    param.put(&quot;start&quot;,start);\n    PageUtils pageUtils &#x3D; roleService.searchRoleByPage(param);\n    return R.ok().put(&quot;page&quot;,pageUtils);\n&#125;</code></pre>\n\n<h1 id=\"新增-x2F-修改\"><a href=\"#新增-x2F-修改\" class=\"headerlink\" title=\"新增&#x2F;修改\"></a>新增&#x2F;修改</h1><h2 id=\"前端：-1\"><a href=\"#前端：-1\" class=\"headerlink\" title=\"前端：\"></a>前端：</h2><h3 id=\"role-vue-1\"><a href=\"#role-vue-1\" class=\"headerlink\" title=\"role.vue\"></a>role.vue</h3><h4 id=\"Template-1\"><a href=\"#Template-1\" class=\"headerlink\" title=\"Template\"></a>Template</h4><pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">\t&lt;el-button\n                size&#x3D;&quot;medium&quot;\n                type&#x3D;&quot;primary&quot;\n                :disabled&#x3D;&quot;!isAuth([&#39;ROOT&#39;, &#39;ROLE:INSERT&#39;])&quot;\n                @click&#x3D;&quot;addHandle()&quot;\n            &gt;\n                新增\n            &lt;&#x2F;el-button&gt;\n&lt;el-button\n             type&#x3D;&quot;text&quot;\n             size&#x3D;&quot;medium&quot;\n             :disabled&#x3D;&quot;!isAuth([&#39;ROOT&#39;, &#39;ROLE:UPDATE&#39;]) || scope.row.id &#x3D;&#x3D; 0&quot;\n                    @click&#x3D;&quot;updateHandle(scope.row.id, scope.row.systemic)&quot;\n                &gt;\n                    修改\n                &lt;&#x2F;el-button&gt;</code></pre>\n\n<h4 id=\"Script-1\"><a href=\"#Script-1\" class=\"headerlink\" title=\"Script\"></a>Script</h4><pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">addHandle: function()&#123;\n\t\t\tthis.addOrUpdateVisible&#x3D;true;\n\t\t\tthis.$nextTick(()&#x3D;&gt;&#123;\n\t\t\t\tthis.$refs.addOrUpdate.init();\n\t\t\t&#125;)\n\t\t&#125;,\n\t\tupdateHandle: function(id,systemic)&#123;\n\t\t\tthis.addOrUpdateVisible&#x3D;true;\n\t\t\tthis.$nextTick(()&#x3D;&gt;&#123;\n\t\t\t\tthis.$refs.addOrUpdate.init(id,systemic);\n\t\t\t&#125;)\n\t\t&#125;</code></pre>\n\n<h3 id=\"role-add-or-update-vue\"><a href=\"#role-add-or-update-vue\" class=\"headerlink\" title=\"role-add-or-update.vue\"></a>role-add-or-update.vue</h3><h4 id=\"Template-2\"><a href=\"#Template-2\" class=\"headerlink\" title=\"Template\"></a>Template</h4><pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">v-model&#x3D;&quot;dataForm.roleName&quot;\nv-model&#x3D;&quot;dataForm.desc&quot;\nv-model&#x3D;&quot;dataForm.permissions&quot;\n&lt;el-button type&#x3D;&quot;primary&quot; size&#x3D;&quot;medium&quot; @click&#x3D;&quot;dataFormSubmit&quot;&gt;确定&lt;&#x2F;el-button&gt;</code></pre>\n\n<h4 id=\"Script-2\"><a href=\"#Script-2\" class=\"headerlink\" title=\"Script\"></a>Script</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">init: function(id, systemic) &#123;\n\t\t\tlet that &#x3D; this;\n\t\t\tthat.dataForm.id &#x3D; id || 0;\n\t\t\tthat.systemic &#x3D; systemic;\n\t\t\tthat.visible &#x3D; true;\n\t\t\tthat.$nextTick(() &#x3D;&gt; &#123;\n\t\t\t\tthat.$refs[&#39;dataForm&#39;].resetFields();\n\t\t\t\tlet defaultPermissions &#x3D; [];\n\t\t\t\tif (id) &#123;\n\t\t\t\t\tthat.$http(&#39;role&#x2F;searchById&#39;, &#39;POST&#39;, &#123; id: id &#125;, false, function(resp) &#123;\n\t\t\t\t\t\tthat.dataForm.roleName &#x3D; resp.roleName;\n\t\t\t\t\t\tthat.dataForm.desc &#x3D; resp.desc;\n\t\t\t\t\t\tthat.dataForm.permissions &#x3D; JSON.parse(resp.permissions);\n\t\t\t\t\t\t&#x2F;&#x2F;保存原始权限数据\n\t\t\t\t\t\tthat.oldPermissions &#x3D; JSON.parse(resp.permissions);\n\t\t\t\t\t\tdefaultPermissions &#x3D; resp.defaultPermissions;\n\t\t\t\t\t&#125;);\n\t\t\t\t&#125;\n\t\t\t\tthat.$http(&#39;permission&#x2F;searchAllPermission&#39;, &#39;GET&#39;, null, true, function(resp) &#123;\n\t\t\t\t\tlet temp &#x3D; [];\n\t\t\t\t\tfor (let one of resp.list) &#123;\n\t\t\t\t\t\tlet disabled &#x3D; false;\n\t\t\t\t\t\tif (that.systemic) &#123;\n\t\t\t\t\t\t\tdisabled &#x3D; defaultPermissions.includes(one.id);\n\t\t\t\t\t\t&#125;\n\t\t\t\t\t\ttemp.push(&#123; key: one.id, label: &#96;$&#123;one.moduleName&#125;（$&#123;one.actionName&#125;）&#96;, disabled: disabled &#125;);\n\t\t\t\t\t&#125;\n\t\t\t\t\tthat.permisionList &#x3D; temp;\n\t\t\t\t&#125;);\n\t\t\t&#125;);\n\t\t&#125;,\n\t\tdataFormSubmit: function()&#123;\n\t\t\tlet that &#x3D; this;\n\t\t\tthat.$refs[&#39;dataForm&#39;].validate(valid&#x3D;&gt;&#123;\n\t\t\t\tif(valid)&#123;\n\t\t\t\t\tthat.dataForm.permissions.sort(function(a,b)&#123;\n\t\t\t\t\t\treturn a-b;\n\t\t\t\t\t&#125;);\n\t\t\t\t\tif(that.dataForm.permissions.join()!&#x3D;that.oldPermissions.join())&#123;\n\t\t\t\t\t\tthat.dataForm.changed&#x3D;true;\n\t\t\t\t\t&#125;else&#123;\n\t\t\t\t\t\tthat.dataForm.changed&#x3D;false;\n\t\t\t\t\t&#125;\n\t\t\t\t\tthat.$http(&#96;role&#x2F;$&#123;!that.dataForm.id?&#39;insert&#39;:&#39;update&#39;&#125;&#96;,&#39;POST&#39;,that.dataForm,true,function(resp)&#123;\n\t\t\t\t\t\tif (resp.rows &#x3D;&#x3D; 1) &#123;\n\t\t\t\t\t\t\tthat.$message(&#123;\n\t\t\t\t\t\t\t\tmessage: &#39;操作成功&#39;,\n\t\t\t\t\t\t\t\ttype: &#39;success&#39;,\n\t\t\t\t\t\t\t\tduration: 1200\n\t\t\t\t\t\t\t&#125;)\n\t\t\t\t\t\t\tthat.visible &#x3D; false;\n\t\t\t\t\t\t\tthat.$parent.loadDateList();\n\t\t\t\t\t\t\tthat.$emit(&#39;refreshDataList&#39;);\n\t\t\t\t\t\t&#125; else &#123;\n\t\t\t\t\t\t\tthat.$message(&#123;\n\t\t\t\t\t\t\t\tmessage: &#39;操作失败&#39;,\n\t\t\t\t\t\t\t\ttype: &#39;error&#39;,\n\t\t\t\t\t\t\t\tduration: 1200\n\t\t\t\t\t\t\t&#125;)\n\t\t\t\t\t\t&#125;\n\t\t\t\t\t&#125;)\n\t\t\t\t&#125;\n\t\t\t&#125;)\n\t\t&#125;</code></pre>\n\n<h2 id=\"后端：-1\"><a href=\"#后端：-1\" class=\"headerlink\" title=\"后端：\"></a>后端：</h2><h3 id=\"DAO-1\"><a href=\"#DAO-1\" class=\"headerlink\" title=\"DAO\"></a>DAO</h3><h4 id=\"TbRoleDao-1\"><a href=\"#TbRoleDao-1\" class=\"headerlink\" title=\"TbRoleDao\"></a>TbRoleDao</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public int insertRole(TbRole role);\n\npublic ArrayList&lt;Integer&gt; searchUserIdByRoleId(int roleId);\npublic int updateRole(TbRole role);</code></pre>\n\n<h4 id=\"Mapper-1\"><a href=\"#Mapper-1\" class=\"headerlink\" title=\"Mapper\"></a>Mapper</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">&lt;insert id&#x3D;&quot;insertRole&quot; parameterType&#x3D;&quot;com.example.emos.api.db.pojo.TbRole&quot;&gt;\n    INSERT INTO tb_role\n    &lt;set&gt;\n        role_name&#x3D;#&#123;roleName&#125;,\n        permissions&#x3D;#&#123;permissions&#125;\n        &lt;if test&#x3D;&quot;desc!&#x3D;null&quot;&gt;\n           ,&#96;desc&#96;&#x3D;#&#123;desc&#125;\n        &lt;&#x2F;if&gt;\n    &lt;&#x2F;set&gt;\n&lt;&#x2F;insert&gt;\n&lt;update id&#x3D;&quot;updateRole&quot; parameterType&#x3D;&quot;com.example.emos.api.db.pojo.TbRole&quot;&gt;\n        UPDATE tb_role\n        &lt;set&gt;\n            role_name&#x3D;#&#123;roleName&#125;,\n            &#96;desc&#96;&#x3D;#&#123;desc&#125;,\n            permissions&#x3D;#&#123;permissions&#125;\n        &lt;&#x2F;set&gt;\n        &lt;where&gt;\n            id&#x3D;#&#123;id&#125; AND id!&#x3D;0\n        &lt;&#x2F;where&gt;\n    &lt;&#x2F;update&gt;\n\t&lt;select id&#x3D;&quot;searchUserIdByRoleId&quot; resultType&#x3D;&quot;int&quot; parameterType&#x3D;&quot;int&quot;&gt;\n        SELECT u.id\n        FROM tb_role r\n        JOIN tb_user u ON JSON_CONTAINS(u.role,CONVERT(r.id,CHAR))\n        WHERE r.id&#x3D;#&#123;id&#125;\n    &lt;&#x2F;select&gt;</code></pre>\n\n<h3 id=\"Service-1\"><a href=\"#Service-1\" class=\"headerlink\" title=\"Service\"></a>Service</h3><h4 id=\"RoleService-1\"><a href=\"#RoleService-1\" class=\"headerlink\" title=\"RoleService\"></a>RoleService</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public int insertRole(TbRole role);\n\npublic ArrayList&lt;Integer&gt; searchUserIdByRoleId(int roleId);\npublic int updateRole(TbRole role);</code></pre>\n\n<h4 id=\"Impl-1\"><a href=\"#Impl-1\" class=\"headerlink\" title=\"Impl\"></a>Impl</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Override\npublic int insertRole(TbRole role) &#123;\n    return roleDao.insertRole(role);\n&#125;\n\n@Override\npublic ArrayList&lt;Integer&gt; searchUserIdByRoleId(int roleId) &#123;\n    return roleDao.searchUserIdByRoleId(roleId);\n&#125;\n\n@Override\npublic int updateRole(TbRole role) &#123;\n    return roleDao.updateRole(role);\n&#125;</code></pre>\n\n<h3 id=\"Controller-1\"><a href=\"#Controller-1\" class=\"headerlink\" title=\"Controller\"></a>Controller</h3><h4 id=\"InsertRoleForm\"><a href=\"#InsertRoleForm\" class=\"headerlink\" title=\"InsertRoleForm\"></a>InsertRoleForm</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Data\n@Schema(description &#x3D; &quot;新增角色&quot;)\npublic class InsertRoleForm &#123;\n\n    @NotNull(message &#x3D; &quot;roleName不能为空&quot;)\n    @Schema(description &#x3D; &quot;角色名称&quot;)\n    private String roleName;\n\n    @NotEmpty(message &#x3D; &quot;permissions不难为空&quot;)\n    @Schema(description &#x3D; &quot;权限&quot;)\n    private Integer[] permissions;\n\n    @Length(max &#x3D; 20,message &#x3D; &quot;desc不能超过20个&quot;)\n    @Schema(description &#x3D; &quot;备注&quot;)\n    private String desc;\n&#125;</code></pre>\n\n<h4 id=\"UpdateRoleForm\"><a href=\"#UpdateRoleForm\" class=\"headerlink\" title=\"UpdateRoleForm\"></a>UpdateRoleForm</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Data\n@Schema(description &#x3D; &quot;修改角色&quot;)\npublic class UpdateRoleForm &#123;\n\n    @NotNull(message &#x3D; &quot;id不能为空&quot;)\n    @Schema(description &#x3D; &quot;角色ID&quot;)\n    private Integer id;\n\n    @NotBlank(message &#x3D; &quot;roleName不能为空&quot;)\n    @Pattern(regexp &#x3D; &quot;^[0-9a-zA-Z\\\\u4e00-\\\\u9fa5]&#123;1,10&#125;$&quot;,message &#x3D; &quot;角色名称不正确&quot;)\n    @Schema(description &#x3D; &quot;角色名称&quot;)\n    private String roleName;\n\n    @NotEmpty(message &#x3D; &quot;permissions不能为空&quot;)\n    @Schema(description &#x3D; &quot;权限&quot;)\n    private Integer[] permissions;\n\n    @Length(max &#x3D; 20,message &#x3D; &quot;desc不能超过20个&quot;)\n    @Schema(description &#x3D; &quot;备注&quot;)\n    private String desc;\n\n    @NotNull(message &#x3D; &quot;changed不能为空&quot;)\n    @Schema(description &#x3D; &quot;权限是否改动&quot;)\n    private boolean changed;\n&#125;</code></pre>\n\n<h4 id=\"RoleController-1\"><a href=\"#RoleController-1\" class=\"headerlink\" title=\"RoleController\"></a>RoleController</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@PostMapping(&quot;&#x2F;insert&quot;)\n@Operation(summary &#x3D; &quot;新增角色&quot;)\n@SaCheckPermission(value &#x3D; &#123;&quot;ROOT&quot;,&quot;ROLE:INSERT&quot;&#125;,mode &#x3D; SaMode.OR)\npublic R insert(@Valid @RequestBody InsertRoleForm form)&#123;\n    TbRole tbRole&#x3D;new TbRole();\n    tbRole.setRoleName(form.getRoleName());\n    tbRole.setDesc(form.getDesc());\n    tbRole.setPermissions(JSONUtil.parseArray(form.getPermissions()).toString());\n    int rows&#x3D;roleService.insertRole(tbRole);\n    return R.ok().put(&quot;rows&quot;,rows);\n&#125;\n\n@PostMapping(&quot;&#x2F;update&quot;)\n@Operation(summary &#x3D; &quot;修改角色&quot;)\n@SaCheckPermission(value &#x3D; &#123;&quot;ROOT&quot;,&quot;ROLE:UPDATE&quot;&#125;,mode &#x3D; SaMode.OR)\npublic R update(@Valid @RequestBody UpdateRoleForm form)&#123;\n    TbRole tbRole&#x3D;new TbRole();\n    tbRole.setId(form.getId());\n    tbRole.setRoleName(form.getRoleName());\n    tbRole.setDesc(form.getDesc());\n    tbRole.setPermissions(JSONUtil.parseArray(form.getPermissions()).toString());\n    int rows&#x3D;roleService.updateRole(tbRole);\n    if (rows&#x3D;&#x3D;1&amp;&amp;form.isChanged())&#123;\n        ArrayList&lt;Integer&gt; list &#x3D; roleService.searchUserIdByRoleId(form.getId());\n        list.forEach(StpUtil::logoutByLoginId);\n    &#125;\n    return R.ok().put(&quot;rows&quot;,rows);\n&#125;</code></pre>\n\n<h1 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h1><h2 id=\"前端：-2\"><a href=\"#前端：-2\" class=\"headerlink\" title=\"前端：\"></a>前端：</h2><h3 id=\"role-vue-2\"><a href=\"#role-vue-2\" class=\"headerlink\" title=\"role.vue\"></a>role.vue</h3><h4 id=\"Template-3\"><a href=\"#Template-3\" class=\"headerlink\" title=\"Template\"></a>Template</h4><pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;el-button\n                    size&#x3D;&quot;medium&quot;\n                    type&#x3D;&quot;danger&quot;\n                    :disabled&#x3D;&quot;!isAuth([&#39;ROOT&#39;, &#39;ROLE:DELETE&#39;])&quot;\n                    @click&#x3D;&quot;deleteHandle()&quot;\n                &gt;\n                    批量删除\n                &lt;&#x2F;el-button&gt;\n&lt;el-button type&#x3D;&quot;text&quot; size&#x3D;&quot;medium&quot;\n\t\t\t\t\t\t:disabled&#x3D;&quot;!isAuth([&#39;ROOT&#39;, &#39;ROLE:DELETE&#39;]) || scope.row.systemic || scope.row.users &gt; 0&quot;\n\t\t\t\t\t\t@click&#x3D;&quot;deleteHandle(scope.row.id)&quot;&gt;\n\t\t\t\t\t\t删除\n\t\t\t\t\t&lt;&#x2F;el-button&gt;</code></pre>\n\n<h4 id=\"Script-3\"><a href=\"#Script-3\" class=\"headerlink\" title=\"Script\"></a>Script</h4><pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">selectionChangeHandle: function(val) &#123;\n\tthis.dataListSelections &#x3D; val;\n&#125;,\ndeleteHandle: function(id) &#123;\n\tlet that &#x3D; this;\n\tlet ids &#x3D; id ? [id] : that.dataListSelections.map(item &#x3D;&gt; &#123;\n\t\treturn item.id\n\t&#125;);\n\tif (ids &#x3D;&#x3D; 0) &#123;\n\t\tthat.$message(&#123;\n\t\t\tmessage: &#39;没有选中记录&#39;,\n\t\t\ttype: &#39;warning&#39;,\n\t\t\tduration: 1200\n\t\t&#125;);\n\t&#125; else &#123;\n\t\tthat.$confirm(&#96;确定要删除选中的记录吗？&#96;, &#39;提示&#39;, &#123;\n\t\t\tconfirmButtonText: &#39;确定&#39;,\n\t\t\tcancelButtonText: &#39;取消&#39;,\n\t\t\ttype: &#39;warning&#39;\n\t\t&#125;).then(() &#x3D;&gt; &#123;\n\t\t\tthat.$http(&#39;role&#x2F;deleteRoleByIds&#39;, &#39;POST&#39;, &#123;\n\t\t\t\tids: ids\n\t\t\t&#125;, true, function(resp) &#123;\n\t\t\t\tif (resp.rows &gt; 0) &#123;\n\t\t\t\t\tthat.$message(&#123;\n\t\t\t\t\t\tmessage: &#39;操作成功&#39;,\n\t\t\t\t\t\ttype: &#39;success&#39;,\n\t\t\t\t\t\tduration: 1200\n\t\t\t\t\t&#125;);\n\t\t\t\t\tthat.loadDateList();\n\t\t\t\t&#125; else &#123;\n\t\t\t\t\tthat.$message(&#123;\n\t\t\t\t\t\tmessage: &#39;删除失败&#39;,\n\t\t\t\t\t\ttype: &#39;warning&#39;,\n\t\t\t\t\t\tduration: 1200\n\t\t\t\t\t&#125;);\n\t\t\t\t&#125;\n\t\t\t&#125;);\n\t\t&#125;);\n\t&#125;\n&#125;</code></pre>\n\n<h2 id=\"后端\"><a href=\"#后端\" class=\"headerlink\" title=\"后端\"></a>后端</h2><h3 id=\"DAO-2\"><a href=\"#DAO-2\" class=\"headerlink\" title=\"DAO\"></a>DAO</h3><h4 id=\"TbRoleDao-2\"><a href=\"#TbRoleDao-2\" class=\"headerlink\" title=\"TbRoleDao\"></a>TbRoleDao</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public boolean searchCanDelete(Integer[] ids);\npublic int deleteRoleByIds(Integer[] ids);</code></pre>\n\n<h4 id=\"Mapper-2\"><a href=\"#Mapper-2\" class=\"headerlink\" title=\"Mapper\"></a>Mapper</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">&lt;select id&#x3D;&quot;searchCanDelete&quot; resultType&#x3D;&quot;boolean&quot;&gt;\n    SELECT IF(SUM(temp.users)&gt;0,FALSE,TRUE) as result FROM (\n        SELECT COUNT(u.id) as users\n        FROM tb_role r\n        JOIN tb_user u ON JSON_CONTAINS(u.role,CONVERT(r.id,CHAR))\n        WHERE r.id IN\n        &lt;foreach collection&#x3D;&quot;array&quot; open&#x3D;&quot;(&quot; separator&#x3D;&quot;,&quot; close&#x3D;&quot;)&quot; item&#x3D;&quot;one&quot;&gt;\n            #&#123;one&#125;\n        &lt;&#x2F;foreach&gt;\n        GROUP BY r.id\n    ) temp\n&lt;&#x2F;select&gt;\n&lt;delete id&#x3D;&quot;deleteRoleByIds&quot;&gt;\n        DELETE FROM tb_role\n        WHERE id IN\n        &lt;foreach collection&#x3D;&quot;array&quot; open&#x3D;&quot;(&quot; separator&#x3D;&quot;,&quot; close&#x3D;&quot;)&quot; item&#x3D;&quot;one&quot;&gt;\n            #&#123;one&#125;\n        &lt;&#x2F;foreach&gt;\n        AND systemic&#x3D; FALSE\n    &lt;&#x2F;delete&gt;</code></pre>\n\n<h3 id=\"Service-2\"><a href=\"#Service-2\" class=\"headerlink\" title=\"Service\"></a>Service</h3><h4 id=\"RoleService-2\"><a href=\"#RoleService-2\" class=\"headerlink\" title=\"RoleService\"></a>RoleService</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public int deleteRoleByIds(Integer[] ids) throws Exception;</code></pre>\n\n<h4 id=\"Impl-2\"><a href=\"#Impl-2\" class=\"headerlink\" title=\"Impl\"></a>Impl</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Override\npublic int deleteRoleByIds(Integer[] ids) throws Exception &#123;\n    if (!roleDao.searchCanDelete(ids))&#123;\n        throw new Exception(&quot;无法删除关联用户的角色&quot;);\n    &#125;\n    return roleDao.deleteRoleByIds(ids);\n&#125;</code></pre>\n\n<h3 id=\"Controller-2\"><a href=\"#Controller-2\" class=\"headerlink\" title=\"Controller\"></a>Controller</h3><h4 id=\"DeleteRoleByIdsForm\"><a href=\"#DeleteRoleByIdsForm\" class=\"headerlink\" title=\"DeleteRoleByIdsForm\"></a>DeleteRoleByIdsForm</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@Data\n@Schema(description &#x3D; &quot;删除选中角色&quot;)\npublic class DeleteRoleByIdsForm &#123;\n\n    @NotEmpty(message &#x3D; &quot;ids不能为空&quot;)\n    @Schema(description &#x3D; &quot;角色ID&quot;)\n    private Integer[] ids;\n&#125;</code></pre>\n\n<h4 id=\"RoleController-2\"><a href=\"#RoleController-2\" class=\"headerlink\" title=\"RoleController\"></a>RoleController</h4><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">@PostMapping(&quot;&#x2F;deleteRoleByIds&quot;)\n@Operation(summary &#x3D; &quot;删除角色&quot;)\n@SaCheckPermission(value &#x3D; &#123;&quot;ROOT&quot;,&quot;ROLE:DELETE&quot;&#125;,mode &#x3D; SaMode.OR)\npublic R deleteRoleByIds(@Valid @RequestBody DeleteRoleByIdsForm form) throws Exception &#123;\n    int rows&#x3D;roleService.deleteRoleByIds(form.getIds());\n    return R.ok().put(&quot;rows&quot;,rows);\n&#125;</code></pre>\n","feature":true,"text":"角色管理模块 查询前端：role.vueTemplate v-model&#x3D;&quot;dataForm.roleName&quot; &lt;el-button size&#x3D;&quot;medium&quot; type&#x3D;&quot;primary&q...","link":"","photos":[],"count_time":{"symbolsCount":"17k","symbolsTime":"15 mins."},"categories":[{"name":"Java","slug":"Java","count":5,"path":"api/categories/Java.json"},{"name":"Vue","slug":"Java/Vue","count":4,"path":"api/categories/Java/Vue.json"}],"tags":[{"name":"springboot","slug":"springboot","count":4,"path":"api/tags/springboot.json"},{"name":"vue","slug":"vue","count":4,"path":"api/tags/vue.json"},{"name":"wx","slug":"wx","count":4,"path":"api/tags/wx.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">查询</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E7%AB%AF%EF%BC%9A\"><span class=\"toc-text\">前端：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#role-vue\"><span class=\"toc-text\">role.vue</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Template\"><span class=\"toc-text\">Template</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Script\"><span class=\"toc-text\">Script</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%8E%E7%AB%AF%EF%BC%9A\"><span class=\"toc-text\">后端：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DAO\"><span class=\"toc-text\">DAO</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#TbRoleDao\"><span class=\"toc-text\">TbRoleDao</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Mapper\"><span class=\"toc-text\">Mapper</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Service\"><span class=\"toc-text\">Service</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RoleService\"><span class=\"toc-text\">RoleService</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Impl\"><span class=\"toc-text\">Impl</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Controller\"><span class=\"toc-text\">Controller</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#SearchRoleByPageForm\"><span class=\"toc-text\">SearchRoleByPageForm</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RoleController\"><span class=\"toc-text\">RoleController</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%96%B0%E5%A2%9E-x2F-%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">新增&#x2F;修改</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E7%AB%AF%EF%BC%9A-1\"><span class=\"toc-text\">前端：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#role-vue-1\"><span class=\"toc-text\">role.vue</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Template-1\"><span class=\"toc-text\">Template</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Script-1\"><span class=\"toc-text\">Script</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#role-add-or-update-vue\"><span class=\"toc-text\">role-add-or-update.vue</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Template-2\"><span class=\"toc-text\">Template</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Script-2\"><span class=\"toc-text\">Script</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%8E%E7%AB%AF%EF%BC%9A-1\"><span class=\"toc-text\">后端：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DAO-1\"><span class=\"toc-text\">DAO</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#TbRoleDao-1\"><span class=\"toc-text\">TbRoleDao</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Mapper-1\"><span class=\"toc-text\">Mapper</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Service-1\"><span class=\"toc-text\">Service</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RoleService-1\"><span class=\"toc-text\">RoleService</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Impl-1\"><span class=\"toc-text\">Impl</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Controller-1\"><span class=\"toc-text\">Controller</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#InsertRoleForm\"><span class=\"toc-text\">InsertRoleForm</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#UpdateRoleForm\"><span class=\"toc-text\">UpdateRoleForm</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RoleController-1\"><span class=\"toc-text\">RoleController</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">删除</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E7%AB%AF%EF%BC%9A-2\"><span class=\"toc-text\">前端：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#role-vue-2\"><span class=\"toc-text\">role.vue</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Template-3\"><span class=\"toc-text\">Template</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Script-3\"><span class=\"toc-text\">Script</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%8E%E7%AB%AF\"><span class=\"toc-text\">后端</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#DAO-2\"><span class=\"toc-text\">DAO</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#TbRoleDao-2\"><span class=\"toc-text\">TbRoleDao</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Mapper-2\"><span class=\"toc-text\">Mapper</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Service-2\"><span class=\"toc-text\">Service</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RoleService-2\"><span class=\"toc-text\">RoleService</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Impl-2\"><span class=\"toc-text\">Impl</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Controller-2\"><span class=\"toc-text\">Controller</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#DeleteRoleByIdsForm\"><span class=\"toc-text\">DeleteRoleByIdsForm</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#RoleController-2\"><span class=\"toc-text\">RoleController</span></a></li></ol></li></ol></li></ol></li></ol>","author":{"name":"星桜","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"学习Java中","socials":{"github":"https://github.com/umrlll","twitter":"https://twitter.com/Smile_Amber234","stackoverflow":"","wechat":"","qq":"tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=1414018493&website=www.oicqzone.com","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/24956413"}}}},"mapped":true,"prev_post":{"title":"day04-部门管理模块","uid":"bb1b312f3480359373d075dad12e4c2e","slug":"springboot-vue-wx-project/day04-部门管理模块","date":"2022-07-11T03:31:26.000Z","updated":"2022-07-11T10:59:52.366Z","comments":true,"path":"api/articles/springboot-vue-wx-project/day04-部门管理模块.json","keywords":"Java study learn 学习","cover":null,"text":"部门管理模块 查询前端dept.vueTemplatev-model&#x3D;&quot;dataForm.deptName&quot; &lt;el-button size&#x3D;&quot;medium&quot; type&#x3D;&quot;primary&quo...","link":"","photos":[],"count_time":{"symbolsCount":"15k","symbolsTime":"13 mins."},"categories":[{"name":"Java","slug":"Java","count":5,"path":"api/categories/Java.json"},{"name":"Vue","slug":"Java/Vue","count":4,"path":"api/categories/Java/Vue.json"}],"tags":[{"name":"springboot","slug":"springboot","count":4,"path":"api/tags/springboot.json"},{"name":"vue","slug":"vue","count":4,"path":"api/tags/vue.json"},{"name":"wx","slug":"wx","count":4,"path":"api/tags/wx.json"}],"author":{"name":"星桜","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"学习Java中","socials":{"github":"https://github.com/umrlll","twitter":"https://twitter.com/Smile_Amber234","stackoverflow":"","wechat":"","qq":"tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=1414018493&website=www.oicqzone.com","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/24956413"}}}},"feature":true},"next_post":{"title":"day02-用户管理模块","uid":"35fec71f027e3bb1983fb3c45c0e02de","slug":"springboot-vue-wx-project/day02-用户管理模块","date":"2022-07-06T11:33:17.000Z","updated":"2022-07-11T07:51:33.744Z","comments":true,"path":"api/articles/springboot-vue-wx-project/day02-用户管理模块.json","keywords":"Java study learn 学习","cover":null,"text":"用户管理模块 查询Title:条件查询 移动端-&gt;UserController:1.searchUserByPage UserController-&gt;UserService:2.searchUserByPage UserService-&gt;TbUserDao:3....","link":"","photos":[],"count_time":{"symbolsCount":"25k","symbolsTime":"23 mins."},"categories":[{"name":"Java","slug":"Java","count":5,"path":"api/categories/Java.json"},{"name":"Vue","slug":"Java/Vue","count":4,"path":"api/categories/Java/Vue.json"}],"tags":[{"name":"springboot","slug":"springboot","count":4,"path":"api/tags/springboot.json"},{"name":"vue","slug":"vue","count":4,"path":"api/tags/vue.json"},{"name":"wx","slug":"wx","count":4,"path":"api/tags/wx.json"}],"author":{"name":"星桜","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"学习Java中","socials":{"github":"https://github.com/umrlll","twitter":"https://twitter.com/Smile_Amber234","stackoverflow":"","wechat":"","qq":"tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=1414018493&website=www.oicqzone.com","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/24956413"}}}},"feature":true}}